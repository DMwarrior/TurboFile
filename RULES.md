# TurboFile 性能与变更测试规则（必须遵守）

## 1. 传输耗时测试（每次功能修改后必须执行）
- 测试场景：从服务器 61 传输指定目录至目标目录。
- 源服务器：192.168.9.61
- 源路径：`/home/th/work/fankun/test/1024x40`
- 目标路径：`/home/th/Project_ssd/fankun/test`
- 记录内容：仅记录本次传输「总耗时」。
- 执行时机：每次修改一个功能后，立即进行一次端到端传输测试并记录结果。

> 说明：测试用于回归验证功能变更对“传输性能”的影响，任何导致耗时变长的改动都需要回退或优化直至恢复基线表现。

## 2. 新功能实现方式（最高效、无感）
- 必须采用最高效、最轻量的实现；优先使用：
  - 按需加载（Lazy Load）
  - 异步执行（Async / 非阻塞）
  - 缓存复用（Cache）
- 禁止行为：
  - 阻塞主线程或渲染线程（例如：同步长任务、频繁重排/重绘）
  - 后台轮询/周期性任务（除非得到明确批准）
  - 大体积依赖或沉重运行时（影响首屏与交互响应）
  - 复杂动效动画（影响流畅度）
- 目标体验：界面与操作“无感”切换与响应，用户几乎感知不到等待。

## 3. 传输速度保护（硬性约束）
- 任何改动 **绝对不能** 影响传输速度（当前基线：约 54 秒）。
- 不得占用传输相关的网络带宽和 CPU 预算：
  - 不在传输期间增加额外 WebSocket/HTTP 频率
  - 不在传输期间执行与传输无关的密集计算
  - 不引入与传输同资源池竞争的后台任务
- 如发现传输时间回退或波动异常，必须立即定位并回滚/修复。

## 4. 变更交付清单（每次改动需要提供）
- 变更点简述（只列与需求直接相关的修改）
- 端到端传输测试结果：总耗时 = `XX 秒`
- 风险评估（若有）与后续观察点

---

以上规则用于保证 TurboFile 的“性能优先”目标：
- 功能增加 ≠ 性能下降
- 交互更强 ≠ 卡顿与延迟
- 所有新增能力都在“按需、异步、轻量”的前提下实现，并通过固定场景的传输测试进行回归验证。
